<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Page 2</title>
<link rel="stylesheet" type="text/css" href="theme.css">

</head>

<body>
<h1>On affiche les donn√©es avec Javascript</h1>
</body>

<script src="./d3.min.js"></script>
<script>

function nombre(x) {
    if (!x) return null;
    return +(x.replace(/,/g, ''));
}

d3.csv('population.csv', function(data) {
    data2 = data
    .map(function(d) {
        var e = {
            nom: d['Total population'],
            pop2015: nombre(d[2015]),
        };
        return e;
    });

    data2 = data2.sort(function(a,b) {
        return d3.descending(a.pop2015, b.pop2015);
    })
    .slice(0,10);

    console.log(data2);

    data2.forEach(function(d) {
        d3.select('body')
          .append('p')
          .html(d.nom+': '+d.pop2015);
    })
    ;

});

</script>

<script src="theme.js"></script>
</html>